.root {
  position: relative;
  border: 1px solid;
  border-radius: var(--mantine-radius-default);

  @mixin where-light {
    border-color: var(--mantine-color-gray-4);
  }

  @mixin where-dark {
    border-color: var(--mantine-color-dark-4);
  }
}

.Typography {
  padding: 0;
  margin: 0;

  & li > p {
    margin: 0;
  }

  & ul li,
  & ol li {
    margin-top: 2px;
  }

  & p {
    margin-bottom: 7px;
  }

  & h1,
  & h2,
  & h3,
  & h4,
  & h5,
  & h6,
  & p {
    margin-top: 0;
  }
}

.content {
  background-color: var(--mantine-color-body);
  border-radius: var(--mantine-radius-default);

  & :global(.ProseMirror) {
    outline: 0;
    padding: var(--mantine-spacing-md);
  }

  & :global(.ProseMirror > *:last-child) {
    margin-bottom: 0;
  }

  & :global(.ProseMirror p.is-editor-empty:first-of-type::before) {
    content: attr(data-placeholder);
    pointer-events: none;
    user-select: none;
    float: left;
    height: 0;
    color: var(--mantine-color-placeholder);
  }

  & :global(pre) {
    font-family: var(--mantine-font-family-monospace);
    border-radius: var(--mantine-radius-default);
    padding: var(--mantine-spacing-sm) var(--mantine-spacing-md);

    @mixin where-light {
      background-color: var(--mantine-color-gray-0);
      color: var(--mantine-color-gray-9);
      --code-color-comment: var(--mantine-color-gray-5);
      --code-color-var: var(--mantine-color-red-7);
      --code-color-number: var(--mantine-color-blue-7);
      --code-color-title: var(--mantine-color-pink-7);
      --code-color-keyword: var(--mantine-color-violet-7);
    }

    @mixin where-dark {
      background-color: var(--mantine-color-dark-8);
      color: var(--mantine-color-dark-1);
      --code-color-comment: var(--mantine-color-dark-2);
      --code-color-var: var(--mantine-color-red-5);
      --code-color-number: var(--mantine-color-cyan-5);
      --code-color-title: var(--mantine-color-yellow-5);
      --code-color-keyword: var(--mantine-color-violet-3);
    }

    & code {
      background: none !important;
      color: inherit;
      font-size: var(--mantine-font-size-sm);
      padding: 0;
    }

    & :global(.hljs-comment),
    & :global(.hljs-quote) {
      color: var(--code-color-comment);
    }

    & :global(.hljs-variable),
    & :global(.hljs-template-variable),
    & :global(.hljs-attribute),
    & :global(.hljs-tag),
    & :global(.hljs-regexp),
    & :global(.hljs-link),
    & :global(.hljs-name),
    & :global(.hljs-selector-id),
    & :global(.hljs-selector-class) {
      color: var(--code-color-var);
    }

    & :global(.hljs-number),
    & :global(.hljs-meta),
    & :global(.hljs-built_in),
    & :global(.hljs-builtin-name),
    & :global(.hljs-literal),
    & :global(.hljs-type),
    & :global(.hljs-params) {
      color: var(--code-color-number);
    }

    & :global(.hljs-string),
    & :global(.hljs-symbol),
    & :global(.hljs-bullet) {
      color: var(--code-color-var);
    }

    & :global(.hljs-title),
    & :global(.hljs-section) {
      color: var(--code-color-title);
    }

    & :global(.hljs-keyword),
    & :global(.hljs-selector-tag) {
      color: var(--code-color-keyword);
    }

    & :global(.hljs-emphasis) {
      font-style: italic;
    }

    & :global(.hljs-strong) {
      font-weight: 700;
    }
  }
}

.linkEditorDropdown {
  background-color: var(--mantine-color-body);
}

.control {
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: var(--mantine-radius-default);
  cursor: default;

  &:where([data-variant='default']) {
    border: 1px solid;
    min-width: 26px;
    height: 26px;
  }

  &:where([data-variant='subtle']) {
    --control-icon-size: 20px;
    min-width: 32px;
    height: 32px;
  }

  @mixin where-light {
    background-color: var(--mantine-color-white);
    border-color: var(--mantine-color-gray-4);
    color: var(--mantine-color-gray-7);
  }

  @mixin where-dark {
    border-color: var(--mantine-color-dark-4);
    color: var(--mantine-color-dark-1);

    &:where([data-variant='default']) {
      background-color: var(--mantine-color-dark-6);
    }

    &:where([data-variant='subtle']) {
      background-color: var(--mantine-color-dark-7);
    }
  }

  &:where([data-disabled]) {
    cursor: not-allowed;
    color: var(--mantine-color-disabled-color);
    background-color: var(--mantine-color-disabled);
  }

  &:where([data-interactive]:not([data-disabled])) {
    cursor: pointer;

    @mixin hover {
      color: var(--mantine-color-bright);

      @mixin where-light {
        &:where([data-variant='default']) {
          background-color: var(--mantine-color-gray-0);
        }

        &:where([data-variant='subtle']) {
          background-color: var(--mantine-color-gray-1);
        }
      }

      @mixin where-dark {
        background-color: var(--mantine-color-dark-5);
      }
    }
  }

  &:where([data-active]) {
    background-color: var(--mantine-primary-color-light);
    color: var(--mantine-primary-color-light-color);

    @mixin hover {
      background-color: var(--mantine-primary-color-light-hover);
    }
  }
}

.controlIcon {
  width: var(--control-icon-size, 16px);
  height: var(--control-icon-size, 16px);
}

.controlsGroup {
  display: flex;
  background-color: var(--mantine-color-body);

  &:where([data-variant='default']) {
    & :where([data-rich-text-editor-control]) {
      border-radius: 0;

      &:where(:not(:last-of-type)) {
        border-inline-end-width: 0;
      }

      &:where(:last-of-type) {
        border-start-end-radius: var(--mantine-radius-default);
        border-end-end-radius: var(--mantine-radius-default);
      }

      &:where(:first-of-type) {
        border-start-start-radius: var(--mantine-radius-default);
        border-end-start-radius: var(--mantine-radius-default);
      }
    }
  }
}

.linkEditor {
  display: flex;
}

.linkEditorInput {
  border-start-end-radius: 0;
  border-end-end-radius: 0;
  border-inline-end: 0;
}

.linkEditorExternalControl {
  border: 1px solid;
  color: var(--mantine-color-text);
  height: 24px;
  width: 24px;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: var(--mantine-radius-default);

  @mixin where-light {
    background-color: var(--mantine-color-white);
    border-color: var(--mantine-color-gray-4);
  }

  @mixin where-dark {
    background-color: var(--mantine-color-dark-7);
    border-color: var(--mantine-color-dark-4);
  }

  &:where([data-active]) {
    background-color: var(--mantine-primary-color-light);
    color: var(--mantine-primary-color-filled);

    @mixin hover {
      background-color: var(--mantine-primary-color-light-hover);
    }
  }
}

.linkEditorSave {
  border-start-start-radius: 0;
  border-end-start-radius: 0;
}

.toolbar {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--mantine-spacing-sm);
  top: var(--rte-sticky-offset, 0px);
  background-color: var(--mantine-color-body);
  border-start-end-radius: var(--mantine-radius-default);
  border-start-start-radius: var(--mantine-radius-default);
  border-bottom: 1px solid;

  &:where([data-variant='default']) {
    padding: var(--mantine-spacing-xs) var(--mantine-spacing-md);
  }

  &:where([data-variant='subtle']) {
    padding: 4px;
    row-gap: 0;
  }

  @mixin where-light {
    border-color: var(--mantine-color-gray-4);
  }

  @mixin where-dark {
    border-color: var(--mantine-color-dark-4);
  }

  &:where([data-sticky]) {
    position: sticky;
    z-index: 1;
  }
}

.taskList {
  list-style-type: none;
  padding: 0;
  padding-inline-start: 0;

  & :where(li) {
    margin: 0;
    padding: 0;
    display: flex;
  }

  & :where(ul) {
    margin-top: 5px;
  }

  & p {
    margin: 0;
    padding: 0;
  }

  & :where(label) {
    display: inline-block;
  }

  & :where(input) {
    cursor: pointer;
    appearance: none;
    width: 18px;
    height: 18px;
    border: 1px solid;
    border-radius: var(--mantine-radius-default);
    vertical-align: middle;
    position: relative;

    @mixin where-light {
      background-color: var(--mantine-color-white);
      border-color: var(--mantine-color-gray-4);
    }

    @mixin where-dark {
      background-color: var(--mantine-color-dark-6);
      border-color: var(--mantine-color-dark-4);
    }

    &:checked {
      background-color: var(--mantine-primary-color-filled);
      border-color: var(--mantine-primary-color-filled);

      &::before {
        position: absolute;
        content: '';
        inset: 0;
        background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAxMCA3Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNCA0LjU4NkwxLjcwNyAyLjI5M0ExIDEgMCAxMC4yOTMgMy43MDdsMyAzYS45OTcuOTk3IDAgMDAxLjQxNCAwbDUtNUExIDEgMCAxMDguMjkzLjI5M0w0IDQuNTg2eiIvPjwvc3ZnPg==');
        background-repeat: no-repeat;
        background-size: 10px;
        background-position: center;
      }
    }
  }

  & :where(li > label) {
    margin-inline-end: var(--mantine-spacing-sm);
  }
}

:global(.tableWrapper) {
  padding-bottom: 1rem;
  overflow-x: auto;
}

table {
  width: 100%;
  border: rem(1px) solid var(--table-border-color);
  border-collapse: collapse;
  border-spacing: 0;
  line-height: var(--mantine-line-height);
  font-size: var(--mantine-font-size-sm);
  table-layout: var(--table-layout, auto);
  caption-side: var(--table-caption-side, bottom);

  --table-hover-color: light-dark(var(--mantine-color-gray-1), var(--mantine-color-dark-5));
  --table-striped-color: light-dark(var(--mantine-color-gray-0), var(--mantine-color-dark-6));
  --table-border-color: light-dark(var(--mantine-color-gray-3), var(--mantine-color-dark-4));

  &:where([data-tabular-nums]) {
    font-variant-numeric: tabular-nums;
  }

  &:where([data-variant='vertical']) :where(.th) {
    font-weight: 500;
    background-color: light-dark(var(--mantine-color-gray-0), var(--mantine-color-dark-6));
  }

  th {
    text-align: left;

    @mixin where-rtl {
      text-align: right;
    }
  }

  tr {
    border-bottom: none;
    background-color: transparent;

    @mixin hover {
      &:where([data-hover]) {
        background-color: var(--tr-hover-bg);
      }
    }

    &:where([data-with-row-border]) {
      border-bottom: rem(1px) solid var(--table-border-color);
    }
  }

  td,
  th {
    position: relative;
    padding: var(--table-vertical-spacing)
      var(--table-horizontal-spacing, var(--mantine-spacing-xs));

    &:where([data-with-column-border]:not(:first-child)) {
      border-inline-start: rem(1px) solid var(--table-border-color);
    }

    &:where([data-with-column-border]:not(:last-child)) {
      border-inline-end: rem(1px) solid var(--table-border-color);
    }

    > * {
      margin-bottom: 0 !important;
    }
  }

  tbody {
    & > :where(tr) {
      &:where([data-with-row-border]:last-of-type) {
        border-bottom: none;
      }

      &:where([data-striped='odd']:nth-of-type(odd)) {
        background-color: var(--table-striped-color);
      }

      &:where([data-striped='even']:nth-of-type(even)) {
        background-color: var(--table-striped-color);
      }

      &[data-hover] {
        --tr-hover-bg: var(--table-highlight-on-hover-color, var(--table-hover-color));
      }
    }
  }

  thead {
    top: var(--table-sticky-header-offset, 0);
    z-index: 3;

    &:where([data-sticky]) {
      position: sticky;

      & :where(.th) {
        position: sticky;
        top: var(--table-sticky-header-offset, 0);
        background-color: var(--mantine-color-body);
      }
    }
  }

  :where([data-with-table-border]) thead[data-sticky] {
    position: sticky;
    top: var(--table-sticky-header-offset, 0);
    z-index: 4;
    border-top: none;
  }

  :where([data-with-table-border]) thead[data-sticky]::before {
    content: '';
    display: block;
    position: absolute;
    left: 0;
    top: -0.5px;
    width: 100%;
    height: 1px;
    background-color: var(--table-border-color);
    z-index: 5;
  }

  :where([data-with-table-border]) thead[data-sticky] th:first-child {
    border-top: none;
  }

  :global(.column-resize-handle) {
    background-color: light-dark(var(--mantine-color-blue-3), var(--mantine-color-blue-6));
    bottom: -1px;
    pointer-events: none;
    position: absolute;
    right: -2px;
    top: -1px;
    width: 4px;
  }
}

:global(.resize-cursor) {
  cursor: ew-resize;
  cursor: col-resize;
}

[data-type='details'] {
  display: flex;
  gap: 0.25rem;
  margin: 1.5rem 0;
  border: 1px solid;
  border-radius: 0.5rem;
  padding: 0.5rem;

  border-color: light-dark(var(--mantine-color-gray-3), var(--mantine-color-dark-4));

  button {
    align-items: center;
    background: transparent;
    border: none;
    border-radius: 4px;
    display: flex;
    font-size: 0.625rem;
    height: 1.25rem;
    justify-content: center;
    line-height: 1;
    margin-top: 0.1rem;
    padding: 0;
    width: 1.25rem;

    &:hover {
      background-color: light-dark(var(--mantine-color-gray-1), var(--mantine-color-dark-5));
    }

    &::before {
      content: 'â–¶';
    }
  }

  &:global(.is-open) > button::before {
    transform: rotate(90deg);
  }

  > div {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    width: 100%;
  }

  summary {
    font-weight: 700;
  }
}
