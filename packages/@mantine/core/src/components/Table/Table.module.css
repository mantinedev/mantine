.table {
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
  font-family: var(--mantine-font-family);
  line-height: var(--mantine-line-height);
  font-size: var(--mantine-font-size-sm);
  table-layout: var(--table-layout, auto);
  caption-side: var(--table-caption-side, bottom);
  border: none;

  @mixin where-light {
    --table-hover-color: var(--mantine-color-gray-1);
    --table-striped-color: var(--mantine-color-gray-0);
    --table-border-color: var(--mantine-color-gray-3);
  }

  @mixin where-dark {
    --table-hover-color: var(--mantine-color-dark-5);
    --table-striped-color: var(--mantine-color-dark-6);
    --table-border-color: var(--mantine-color-dark-4);
  }

  &:where([data-with-table-border]) {
    border: rem(1px) solid var(--table-border-color);
  }

  &[data-sticky-header] {
    position: relative;
  }

  &[data-sticky-header] thead {
    position: sticky;
    top: var(--table-sticky-header-offset, 0);
    z-index: 2;
    background-color: var(--mantine-color-body);
  }

  &[data-sticky-header] thead th {
    position: sticky;
    top: var(--table-sticky-header-offset, 0);
    z-index: 2;
    background-color: var(--mantine-color-body);
  }
}

.th {
  text-align: left;
  font-weight: bold;
  padding: var(--mantine-spacing-xs) var(--mantine-spacing-sm);

  @mixin where-rtl {
    text-align: right;
  }
}

.tr {
  border-bottom: none;
  background-color: transparent;

  @mixin hover {
    &:where([data-hover]) {
      background-color: var(--tr-hover-bg);
    }
  }

  &:where([data-with-row-border]) {
    border-bottom: rem(1px) solid var(--table-border-color);
  }
}

.td,
.th {
  padding: var(--table-vertical-spacing) var(--table-horizontal-spacing, var(--mantine-spacing-xs));

  &:where([data-with-column-border]:not(:last-child)) {
    border-inline-end: rem(1px) solid var(--table-border-color);
  }
}

.tbody {
  & :where(tr) {
    &:where([data-with-row-border]:last-of-type) {
      border-bottom: none;
    }

    &:where([data-striped='odd']:nth-of-type(odd)) {
      background-color: var(--table-striped-color);
    }

    &:where([data-striped='even']:nth-of-type(even)) {
      background-color: var(--table-striped-color);
    }

    &[data-hover] {
      --tr-hover-bg: var(--table-highlight-on-hover-color, var(--table-hover-color));
    }
  }
}

.thead {
  top: var(--table-sticky-header-offset, 0);
  z-index: 3;
  background-color: var(--mantine-color-body);
}

.caption {
  color: var(--mantine-color-dimmed);

  &:where([data-side='top']) {
    margin-bottom: var(--mantine-spacing-xs);
  }

  &:where([data-side='bottom']) {
    margin-top: var(--mantine-spacing-xs);
  }
}

.scrollContainer {
  width: 100%;
  overflow-x: auto;
  overflow-y: visible; /* Changed from hidden to visible */
}

.scrollContainerInner {
  min-width: var(--table-min-width);
}

.stickyHeader {
  display: none;
  position: fixed;
  top: 0;
  z-index: 1000;
  background-color: var(--mantine-color-body);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.scrollContainerInner[data-sticky-header='true'] thead th {
  position: sticky;
  top: var(--table-sticky-header-top, 0);
  z-index: 2;
  background-color: var(--mantine-color-body);
}

.scrollContainerInner[data-sticky-left-column='true'] td:first-child,
.scrollContainerInner[data-sticky-left-column='true'] th:first-child {
  position: sticky;
  left: 0;
  z-index: 1;
  background-color: var(--mantine-color-body);
}

.scrollContainerInner[data-sticky-header='true'][data-sticky-left-column='true']
  thead
  th:first-child {
  z-index: 3;
}

.stickyHeader[data-visible='true'] {
  display: block;
}

.stickyHeader table {
  width: 100%;
}

.stickyHeader th {
  background-color: var(--mantine-color-body);
}

.withTableBorder {
  border: 1px solid var(--mantine-color-gray-3);
}

.withColumnBorders td,
.withColumnBorders th {
  border-right: 1px solid var(--mantine-color-gray-3);
}

.withColumnBorders td:last-child,
.withColumnBorders th:last-child {
  border-right: none;
}

.withRowBorders tr {
  border-bottom: 1px solid var(--mantine-color-gray-3);
}

.withRowBorders tr:last-child {
  border-bottom: none;
}

.striped tr:nth-child(even) {
  background-color: var(--mantine-color-gray-0);
}

.highlightOnHover tr:hover {
  background-color: var(--mantine-color-gray-1);
}
