import {
  HooksDemos,
  FloatingWindowDemos,
  OverflowListDemos,
  CardDemos,
  CheckboxDemos,
} from '@docs/demos';
import { Layout } from '@/layout';
import { MDX_DATA } from '@/mdx';

export default Layout(MDX_DATA.Changelog900);

## Support Mantine development

You can now sponsor Mantine development with [OpenCollective](https://opencollective.com/mantinedev).
All funds are used to improve Mantine and create new features and components.

<SponsorButton />

## Migration guide

This changelog covers breaking changes and new features in Mantine 9.0.
To migrate your application to Mantine 9.0, follow [8.x → 9.x migration guide](/guides/8x-to-9x).

## Peer dependencies requirements updates

Starting from Mantine 9.0, the following dependencies are required:

- React 19+ for all `@mantine/*` packages
- Tiptap 3+ for `@mantine/tiptap` ([migration guide](/guides/tiptap-3-migration))
- Recharts 3+ for `@mantine/charts` (no migration required)

## use-collapse hook

New `use-collapse` hook is the hook version of [Collapse](/core/collapse) component.
It allows animation of height from `0` to `auto` and vice versa.

<Demo data={HooksDemos.useCollapseDemo} />

## use-floating-window hook

New [use-floating-window](/hooks/use-floating-window) hook allows creating floating draggable
elements:

<Demo data={HooksDemos.useFloatingWindowUsageDemo} />

## FloatingWindow component

[FloatingWindow](/core/floating-window) provides component API for [use-floating-window](/hooks/use-floating-window) hook:

<Demo data={FloatingWindowDemos.usage} />

## OverflowList component

New [OverflowList](/core/overflow-list) component displays list of items and collapses the overflowing items into a single element:

<Demo data={OverflowListDemos.usage} />

## Card horizontal orientation

[Card](/core/card) component now supports horizontal orientation:

<Demo data={CardDemos.horizontal} demoProps={{ defaultExpanded: false }} />

## Checkbox.Group and Switch.Group maxSelectedValues

[Checkbox.Group](/core/checkbox) and [Switch.Group](/core/switch) now support `maxSelectedValues` prop to limit the number of selected values.
When the limit is reached, the remaining controls are disabled and cannot be selected.

<Demo data={CheckboxDemos.maxSelectedValues} />

## use-form TransformedValues type argument

[use-form](/form/use-form) now supports passing second type argument `TransformedValues` to define the type of
transformed values returned by `form.getTransformedValues` and `form.onSubmit`:

```tsx
import { useForm } from '@mantine/form';

interface FormValues {
  name: string;
  locationId: string;
}

interface TransformedValues {
  name: string;
  locationId: number;
}

function Demo() {
  const form = useForm<FormValues, TransformedValues>({
    mode: 'uncontrolled',
    initialValues: {
      name: '',
      locationId: '2',
    },

    transformValues: (values) => ({
      ...values,
      locationId: Number(values.locationId),
    }),
  });
}
```

## Generic components

[SegmentedControl](/core/segmented-control), [Select](/core/select), [MultiSelect](/core/multi-select),
[Chip.Group](/core/chip), [Switch.Group](/core/switch), [Checkbox.Group](/core/checkbox) and [Radio.Group](/core/radio)
now support generic value type. You can pass primitive values (numbers, strings, boolean, null)
as the type argument. The generic type is used for `value`, `defaultValue`, `onChange` and other props.

For example, generic type can now be used with [SegmentedControl](/core/segmented-control)
to specify string union:

```tsx
import { SegmentedControl } from '@mantine/core';

function Demo() {
  return (
    <SegmentedControl<'orange' | 'grape' | 'apple'>
      data={[
        { value: 'orange', label: 'Orange' },
        { value: 'grape', label: 'Grape' },
        { value: 'apple', label: 'Apple' },
      ]}
    />
  );
}
```

## Other changes

- `@mantine/form` package no longer exports schema resolvers, use [dedicated packages](/form/schema-validation/) instead
- `createPolymorphicComponent` function was renamed to shorter `polymorphic` for convenience
- [Collapse](/core/collapse) component now uses `expanded` prop instead of `in`
- [Select](/core/select) and [MultiSelect](/core/multi-select) components now support primitive value types (numbers, booleans, strings) for data and value
- [Accordion](/core/accordion) component now supports `ref` prop
- [Text](/core/text) and [Anchor](/core/anchor) components no longer accept `color` prop, use `c` style prop instead
- [PasswordInput](/core/password-input) component visibility toggle icon was updated
- [Popover](/core/popover) and [Tooltip](/core/tooltip) components no longer accept `positionDependencies` prop, it is no longer required
- [TypographyStylesProvider](/core/typography) component was renamed to [Typography](/core/typography)
- [Checkbox](/core/checkbox) component now supports `readOnly` and `withErrorStyles` props
- [Checkbox.Group](/core/checkbox/#checkboxgroup-with-formdata) and [Switch.Group](/core/switch/#switchgroup-with-formdata) can now be used in uncontrolled forms and can be accessed through `FormData`
- [use-tree](/core/tree) no longer provides `hoveredNode` and `setHoveredNode` in the returned value
- [use-tree](/core/tree) no longer supports callback state setters for `setExpandedState`, `setSelectedState`, and `setCheckedState` functions
- [use-fullscreen](/hooks/use-fullscreen) hook was split into two hooks: `useFullscreenElement` and `useFullscreenDocument`
- [use-media-query](/hooks/use-media-query) hook no longer includes fallback for old Safari versions (iOS 13 and earlier, released before 2019)
- [use-resize-observer](/hooks/use-resize-observer) now uses the new callback ref approach. The new approach makes hook usable with dynamic node changes. This change might be breaking, validate hook usage in your application.
- [use-mouse](/hooks/use-mouse) hook now uses the new callback ref approach to resolve the issue with stale refs. The previous hook functionality was split into two hooks: `use-mouse` (for ref) and `use-mouse-position` (for document).
- [use-mutation-observer](/hooks/use-mutation-observer) hook now uses the new callback ref approach. The new approach makes hook usable with dynamic node changes. Additionally, a new `useMutationObserverTarget` hook was added for observing external target elements.
- `@mantine/hooks` types were renamed for consistency:
  - `UseScrollSpyReturnType` → `UseScrollSpyReturnValue`
  - `StateHistory` → `UseStateHistoryValue`
  - `OS` → `UseOSReturnValue`
