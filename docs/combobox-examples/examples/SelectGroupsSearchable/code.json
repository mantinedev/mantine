[
  {
    "fileName": "SelectGroupsSearchable.tsx",
    "language": "tsx",
    "code": "\nimport { Combobox, InputBase, useCombobox } from '@mantine/core';\n\nconst groceries = [\n  { label: 'Fruits', options: ['ğŸ Apples', 'ğŸŒ Bananas', 'ğŸ‡ Grapes'] },\n  { label: 'Vegetables', options: ['ğŸ¥¦ Broccoli', 'ğŸ¥• Carrots'] },\n];\n\nconst allGroceries = groceries.reduce<string[]>((acc, group) => [...acc, ...group.options], []);\n\nexport function SelectGroupsSearchable() {\n  const combobox = useCombobox({\n    onDropdownClose: () => combobox.resetSelectedOption(),\n  });\n\n  const [value, setValue] = useState<string | null>(null);\n  const [search, setSearch] = useState('');\n\n  const shouldFilterOptions = allGroceries.every((item) => item !== search);\n  const filteredGroups = groceries.map((group) => {\n    const filteredOptions = shouldFilterOptions\n      ? group.options.filter((item) => item.toLowerCase().includes(search.toLowerCase().trim()))\n      : group.options;\n\n    return { ...group, options: filteredOptions };\n  });\n\n  const totalOptions = filteredGroups.reduce((acc, group) => acc + group.options.length, 0);\n\n  const groups = filteredGroups.map((group) => {\n    const options = group.options.map((item) => (\n      <Combobox.Option value={item} key={item}>\n        {item}\n      </Combobox.Option>\n    ));\n\n    return (\n      <Combobox.Group label={group.label} key={group.label}>\n        {options}\n      </Combobox.Group>\n    );\n  });\n\n  return (\n    <Combobox\n      store={combobox}\n      withinPortal={false}\n      onOptionSubmit={(val) => {\n        setValue(val);\n        setSearch(val);\n        combobox.closeDropdown();\n      }}\n    >\n      <Combobox.Target>\n        <InputBase\n          rightSection={<Combobox.Chevron />}\n          value={search}\n          onChange={(event) => {\n            combobox.openDropdown();\n            combobox.updateSelectedOptionIndex();\n            setSearch(event.currentTarget.value);\n          }}\n          onClick={() => combobox.openDropdown()}\n          onFocus={() => combobox.openDropdown()}\n          onBlur={() => {\n            combobox.closeDropdown();\n            setSearch(value || '');\n          }}\n          placeholder=\"Search value\"\n          rightSectionPointerEvents=\"none\"\n        />\n      </Combobox.Target>\n\n      <Combobox.Dropdown>\n        <Combobox.Options>\n          {totalOptions > 0 ? groups : <Combobox.Empty>Nothing found</Combobox.Empty>}\n        </Combobox.Options>\n      </Combobox.Dropdown>\n    </Combobox>\n  );\n}\n"
  }
]