import { Layout } from '@/layout';
import { MDX_DATA } from '@/mdx';
import { HooksDemos } from '@docs/demos';

export default Layout(MDX_DATA.useValidatedState);

## Usage

`use-validated-state` validates state with a given rule each time state is set.
It returns an object with current validation state, last valid value and current value:

```tsx
const [{ lastValidValue, value, valid }, setValue] =
  useValidatedState('valid', (value) => value === 'valid');

lastValidValue; // -> valid
value; // -> valid
valid; // -> true

setValue('invalid');

lastValidValue; // -> valid
value; // -> invalid
valid; // -> false
```

## Example

<Demo data={HooksDemos.useValidatedStateDemo} />

## Definition

```tsx
function useValidatedState<T>(
  initialValue: T,
  validation: (value: T) => boolean,
  initialValidationState?: boolean
): [
  {
    value: T;
    lastValidValue: T;
    valid: boolean;
  },
  (val: T) => void,
];
```
